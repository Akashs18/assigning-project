<!DOCTYPE html>
<html>
<head>
<title>Assign Project</title>
<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
}
form{
  width:420px;
  margin:50px auto;
  background:#fff;
  padding:25px;
  border-radius:6px;
  box-shadow:0 2px 10px rgba(0,0,0,.1);
}
h3{text-align:center}
input,select,textarea,button{
  width:100%;
  padding:10px;
  margin-top:10px;
}
button{
  background:#3498db;
  color:#fff;
  border:none;
  cursor:pointer;
  font-size:15px;
}
button:hover{background:#2980b9}
</style>
</head>
<body>

<form id="assignForm">
  <h3>Assign Project</h3>

  <label>Assign To</label>
  <select id="assignTo" required>
    <% employees.forEach(e=>{ %>
      <option value="<%= e.id %>"><%= e.username %></option>
    <% }) %>
  </select>

  <label>Budget</label>
  <input type="number" id="budget" required>

  <label>Project Name</label>
  <input type="text" id="projectName" required>

  <label>Project Code</label>
  <input type="text" id="projectCode" required>

  <label>Note</label>
  <textarea id="note"></textarea>

  <button type="submit">Assign</button>
</form>

<script>
document.getElementById("assignForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const payload = {
    "assign-to": document.getElementById("assignTo").value,
    budget: document.getElementById("budget").value,
    "project-name": document.getElementById("projectName").value,
    "project-code": document.getElementById("projectCode").value,
    "additional-note": document.getElementById("note").value
  };

  const res = await fetch("/assign",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(payload)
  });

  const data = await res.json();
  alert(data.message || "Assigned successfully");
});
</script>

</body>
</html>
